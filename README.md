# TrendWaveTracker-
📈 ​​双模式趋势波段PineScript指标 | 左侧回调+右侧突破 | 适用于TradingView​​

**⚠️ 重要说明**：  
> 本项目由交易爱好者开发，**不含任何投资建议**  
> 策略代码可能存在未发现的逻辑缺陷，请勿直接用于实盘  
> 欢迎一起学习改进，但不对使用结果负责

## 🧑‍💻 作者背景

•非金融/数学专业出身

•非职业交易员

•纯粹的技术分析爱好者

•开源学习精神倡导者

## 🌟 项目定位

这是一个「练手级」PineScript实现，包含：

1.波段趋势策略（回调入场）

2.均线突破策略（右侧交易）

3.动态减仓风控模块

适合想了解：

•如何将交易想法转化为代码

•基础技术指标的组合应用

•TradingView策略回测流程


## 🧩 策略特点
| 模块         | 实现程度           | 学习重点                 |
|--------------|--------------------|--------------------------|
| 趋势判定     | 简单均线系统       | 均线斜率计算             |
| 仓位管理     | 固定比例减仓       | 头寸规模控制             |
| 信号过滤     | 基础K线形态判断    | 布尔条件组合             |

## 💡 使用建议（致同样新手）
1. 先用`10%默认仓位`测试
2. 重点观察`2020年3月`极端行情表现
3. 尝试修改`inputBollingerMult`参数感受影响

## 🤝 如何参与改进

如果你发现代码问题：
1. Fork本项目
2. 创建新分支 (git checkout -b fix/信号逻辑)
3. 提交Pull Request

## 🛠 快速安装
1. 复制`.pine`文件内容
2. 在TradingView新建PineScript指标
3. 粘贴代码并保存
4. 调整参数（推荐使用默认值初测）

## 🚨 特别免责声明
本代码可能存在以下问题：
- 未考虑滑点(slippage)和流动性风险
- 未经过严格压力测试
- 参数可能过拟合特定时间段

> 据我所知，专业机构的策略会包含更多模块：  
> 🔒 实时风控系统 | 📊 多因子验证 | 🧪 蒙特卡洛模拟  
> 本项目**均未实现**上述功能  

## 📜 版本记录
| 版本   | 修改内容              | 作者备注                 |
|--------|-----------------------|--------------------------|
| v1.0   | 初始版本              | "能跑通就行"             |
| v1.1   | 增加状态面板          | "终于学会用table了"      |

## 📈 可视化效果
<img width="1452" height="597" alt="image" src="https://github.com/user-attachments/assets/dbacb1d5-3409-4c7d-b481-5ea3ef6e2de8" />
<img width="1521" height="467" alt="image" src="https://github.com/user-attachments/assets/cdd2e7f5-c110-46a1-b2a2-dbaec046ca2a" />

## 🧠 策略逻辑流程图

### 策略一：均线突破交易系统
```mermaid
flowchart TD
    A[开始] --> B{趋势判断}
    B -->|EMA10/SMA10| C[快线突破]
    B -->|EMA20/SMA20| D[慢线突破]
    C & D --> E{是否首次建仓?}
    E -->|是| F[开仓50%仓位<br/>记录入场价]
    E -->|否| G[检查冷却期]
    
    F --> H[绘制建仓标签]
    G --> I{冷却期结束<br/>且触及布林带上轨?}
    I -->|是| J[减仓30%<br/>重置冷却计时器]
    I -->|否| K[保持仓位]
    
    J --> L[更新减仓计数器]
    K --> M{收盘价下穿<br/>清仓均线?}
    M -->|是| N[全仓平仓]
    M -->|否| O[继续持仓]
    
    N --> P[绘制清仓标签]
    O --> Q[更新状态面板]
    P --> Q
    Q --> R[结束]
    
    style C stroke:#3498db,stroke-width:2px
    style D stroke:#e67e22,stroke-width:2px
    style J stroke:#9b59b6,stroke-width:2px
    style N stroke:#e74c3c,stroke-width:2px
```
### 策略而：波段回调交易系统
```mermaid
flowchart TD
    A[开始] --> B{EMA10>EMA25<br/>且斜率>0.01%?}
    B -->|是| C{价格回调至<br/>EMA10的3%内?}
    B -->|否| D[等待条件]
    
    C -->|是| E[开仓50%仓位<br/>启用金字塔加仓]
    C -->|否| F[继续监测]
    E --> G[绘制建仓标签]
    
    G --> H{触及布林带上轨<br/>且冷却期结束?}
    H -->|是| I[减仓30%<br/>冷却5根K线]
    H -->|否| J[保持仓位]
    
    I --> K[更新减仓次数]
    J --> L{EMA10下穿EMA25<br/>且阴线收盘?}
    L -->|是| M[全仓平仓]
    L -->|否| N[继续持仓]
    
    M --> O[绘制清仓标签]
    N --> P[更新状态面板]
    O --> P
    P --> Q[结束]
    
    style B stroke:#2ecc71,stroke-width:2px
    style I stroke:#f39c12,stroke-width:2px
    style M stroke:#c0392b,stroke-width:2px
```

### 策略对比

```mermaid
flowchart LR
    subgraph 均线突破系统["均线突破系统"]
        A1[双均线突破入场] --> B1[固定比例减仓]
        B1 --> C1[收盘价清仓]
    end
    
    subgraph 波段交易系统["波段交易系统"]
        A2[趋势回调入场] --> B2[动态比例减仓]
        B2 --> C2[均线交叉清仓]
    end
    
    A1 -.->|共同特性| A2
    B1 -.->|冷却期控制| B2
    C1 -.->|可视化标签| C2
    
    style 均线突破系统 stroke:#1a5276,fill:#154360,color:white
    style 波段交易系统 stroke:#186a3b,fill:#145a32,color:white

    linkStyle 0,1,2 stroke:#f39c12,stroke-width:2px
```


## 💡 使用建议
- 组合使用两个策略可降低风险
- 加密货币建议调高减仓比例至40%
- 配合1小时以上时间框架使用

## 📊 绩效统计
| 指标          | 波段系统(2023) | 突破系统(2023) |
|---------------|---------------|---------------|
| 胜率          | 62.3%         | 58.1%         |
| 盈亏比        | 1:1.8         | 1:1.5         |
| 最大回撤      | 23.4%         | 27.6%         |

## 📜 版本更新
- `v2.1` 新增状态监控面板
- `v2.0` 支持SMA/EMA切换
- `v1.5` 优化冷却期算法

> ⚠️ 风险提示：本策略需配合止损使用，历史回测不代表未来表现
